{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--FONTS-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poetsen+One&display=swap" rel="stylesheet">
    <!--ICONOS-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <!--BOOTSTRAP-->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.2/js/bootstrap.bundle.min.js"></script>    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <!--CSS-->
    <link type='text/css' href='{% static "css/style.css"%}' rel='stylesheet'>

    <title>Tienda Patitas</title>
</head>
<body>
    <div class="cont-header">
        <header>
            <a href="index" class="logo_patitas_princ"><img src="{% static 'img/logo_patitas.png' %}" alt="patitas"></a>
                
            <!--BARRA NAVEGACION-->
            <nav class="navbar-header">
                <a href="index">Inicio</a>
                <a href="contacto">Contacto</a>
                <a href="#">Nosotros</a>
                <ul class="usuario-nav">
                    <li class="dropdown">
                        <a href="#" class="fas fa-user dropdown-toggle" id="userDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></a>
                        <div class="dropdown-menu" aria-labelledby="userDropdown">
                            {% if user.is_authenticated %}
                                <a class="dropdown-item" href="#">{{ user.username }}</a>
                                <form method="post" action="{% url 'logout' %}">
                                    {% csrf_token %}
                                    <button class="dropdown-item" type="submit">Cerrar Sesion</button>
                                </form>
                            {% else %}
                                <a class="dropdown-item" href="{% url 'login' %}">Login</a>
                            {% endif %}
                        </div>
                    </li>
                </ul>
            </nav>

            <div class="carrito-compras">
                <a href="carrito">Carrito</a>
                <i class="fas fa-shopping-cart"></i>
                <span class="cantidad-cart" id="conteo">0</span>
            </div>

        </header>

    </div>

    <!--MENU-->
    <div class="menu-barra">
        <ul>
            <li><a href="#">Perros &#x25be</a>
                <ul class="dropdown">
                    <li><a href="#">Ropa</a></li>
                    <li><a href="#">Accesorios</a></li>
                    <li><a href="#">Juguetes</a></li>
                    <li><a href="#">Collares y correas</a></li>
                    <li><a href="#">Limpieza</a></li>
                    <li><a href="#">Aseo</a></li>
                    <li><a href="#">Camas</a></li>
                    <li><a href="#">Boles y cuencos</a></li>
                    <li><a href="#">Mobiliario</a></li>
                </ul>
            </li>
            <li><a href="#">Gatos &#x25be</a>
                <ul class="dropdown">
                    <li><a href="#">Ropa</a></li>
                    <li><a href="#">Accesorios</a></li>
                    <li><a href="#">Juguetes</a></li>
                    <li><a href="#">Collares y correas</a></li>
                    <li><a href="#">Limpieza</a></li>
                    <li><a href="#">Aseo</a></li>
                    <li><a href="#">Camas</a></li>
                    <li><a href="#">Boles y cuencos</a></li>
                    <li><a href="#">Mobiliario</a></li>
                </ul>
            </li>
            <li><a href="#">Otras mascotas &#x25be</a>
                <ul class="dropdown">
                    <li><a href="#">Productos animales pequeños</a></li>
                    <li><a href="#">Productos para peces y acuarios</a></li>
                    <li><a href="#">Productos para aves</a></li>
                    <li><a href="#">Mobiliario</a></li>
                </ul>
            </li>

            <li><a href="descuentos">Descuentos</a></li>
            <li><a href="#">Fundación</a></li>
        </ul>
    </div>

    <!--CARRUSEL BOOSTRAP-->
    <section class="principal">
        <div id="carouselExampleIndicators" class="carousel slide">
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
            </div>
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="{% static 'img/promo1.jpg' %}" class="d-block w-100" alt="...">
                    </div>
                    <div class="carousel-item">
                        <img src="{% static 'img/promo2.jpg' %}" class="d-block w-100" alt="...">
                    </div>
                    <div class="carousel-item">
                        <img src="{% static 'img/promo3.jpg' %}" class="d-block w-100" alt="...">
                    </div>
                </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </section>

    <div class="titulos-pag">
        <h1>Producto Populares</h1>
    </div>

    {% if request.user.is_authenticated and request.user.username == "admin" %}
        <div class="editar-productos">
            <a href="crud">Editar Productos</a>
        </div>
    {% endif %}

        <div class="cont-cards">
            <div class="card-prodct">
                {% if producto.foto %}
                <img src="{{ producto.foto.url }}" alt="{{ producto.nombre_prod }}">
                {% else %}
                <img src="{% static 'img/peluche.png' %}" alt="producto1">
                {% endif %}
                <p class="descuento">¡22% de descuento!</p>
                <div class="info">
                    <h1>Peluche Cozie Marvin Alce</h1>
                    <p>Juguete para perros con forma de peluche. Suave y tierno extra resistente.</p>
                    <p class="precio-anterior"><del>$5.250</del></p>
                    <p class="precio-descuento">$2.390</p>
                    <button class="añadir-btn" data-id="1" data-nombre="Peluche Alce" data-precio="2390">Añadir al carro</button>
                </div>
            </div>

            <div class="card-prodct">
                {% if producto.foto %}
                <img src="{{ producto.foto.url }}" alt="{{ producto.nombre_prod }}">
                {% else %}
                <img src="{% static 'img/bandana.png' %}" alt="producto2">
                {% endif %}
                <p class="descuento">¡45% de descuento!</p>
                <div class="info">
                    <h1>Bandana Azul Una Patita De Cueca</h1>
                    <p>Bandana con collar motivo dieciochero.</p>
                    <p class="precio-anterior"><del>$4.590</del></p>
                    <p class="precio-descuento">$1.990</p>
                    <button class="añadir-btn" data-id="2" data-nombre="Bandana Azul" data-precio="1990">Añadir al carro</button>
                </div>
            </div>

            <div class="card-prodct">
                {% if producto.foto %}
                <img src="{{ producto.foto.url }}" alt="{{ producto.nombre_prod }}">
                {% else %}
                <img src="{% static 'img/rascador.png' %}" alt="producto3">
                {% endif %}
                <p class="descuento">¡15% de descuento!</p>
                <div class="info">
                    <h1>Cepillo Para Pared Masajeador Self Groomer</h1>
                    <p>El Serf Groomer Catit Senses proporciona a su gato una fuente constante de placer al frotar y acicalar.</p>
                    <p class="precio-anterior"><del>$9.990</del></p>
                    <p class="precio-descuento">$7.990</p>
                    <button class="añadir-btn" data-id="3" data-nombre="Cepillo Masajeador" data-precio="7990">Añadir al carro</button>
                </div>
            </div>

            <div class="card-prodct">
                {% if producto.foto %}
                <img src="{{ producto.foto.url }}" alt="{{ producto.nombre_prod }}">
                {% else %}
                <img src="{% static 'img/bol.png' %}" alt="No hay imagen disponible">
                {% endif %}
                <p class="descuento">¡30% de descuento!</p>
                <div class="info">
                    <h1>Bol</h1>
                    <p>Comedero cerámico resistente 250ml.</p>
                    <p class="precio-anterior"><del>$5.990</del></p>
                    <p class="precio-descuento">$4.200</p>
                    <button class="añadir-btn" data-id="4" data-nombre="Bol" data-precio="4200">Añadir al carro</button>
                </div>
            </div>

            <div class="card-prodct">
                {% if producto.foto %}
                <img src="{{ producto.foto.url }}" alt="{{ producto.nombre_prod }}">
                {% else %}
                <img src="{% static 'img/sweater.png' %}" alt="producto5">
                {% endif %}
                <p class="descuento">¡25% de descuento!</p>
                <div class="info">
                    <h1>GFPET Sweater Lavanda</h1>
                    <p>Perfecto para mantener a su peludo calentito en el invierno. Cuello alto y ajuste perfecto.</p>
                    <p class="precio-anterior"><del>$9.990</del></p>
                    <p class="precio-descuento">$7.590</p>
                    <button class="añadir-btn" data-id="5" data-nombre="Sweater Lavanda" data-precio="7590">Añadir al carro</button>
                </div>
            </div>

            <div class="card-prodct">
                {% if producto.foto %}
                <img src="{{ producto.foto.url }}" alt="{{ producto.nombre_prod }}">
                {% else %}
                <img src="{% static 'img/cama.png' %}" alt="producto6">
                {% endif %}
                <p class="descuento">¡15% de descuento!</p>
                <div class="info">
                    <h1>DreamWell Cama Rectangular</h1>
                    <p>La cama DreamWell ofrece a su mascota un oasis de siesta cómodo y acogedor.</p>
                    <p class="precio-anterior"><del>$29.990</del></p>
                    <p class="precio-descuento">$16.445</p>
                    <button class="añadir-btn" data-id="6" data-nombre="Cama rectangular" data-precio="16445">Añadir al carro</button>
                </div>
            </div>
        </div>


    <div class="cont-cards">
        {% for x in productos %}
            <div class="card-prodct">
                <img src="{{ x.imagen }}" alt="{{ x.nombre_prod }}">
                <p class="descuento">¡50% de descuento!</p>
                <div class="info">
                    <h1>{{ x.nombre_prod }}</h1>
                    <p>{{ x.descripcion }}</p>
                    <p class="precio-anterior"><del>$50.000</del></p>
                    <p class="precio-descuento">${{ x.precio }}</p>
                    <form action="{% url 'agregar_al_carrito' x.id %}" method="post">
                        {% csrf_token %}
                        <button type="submit" class="añadir-btn">Agregar al Carrito</button>
                    </form>
                </div>
            </div>
        {% endfor %}
    </div>
        
         


    <!--Pie de pagina-->
    <footer class="sec-pie-pagina">
        <div class="fondo-pie-pag">
            <div class="cont-pie-pag">
                <div class="pie-pag-logo">
                    <img src="{% static 'img/iconoLogo.png' %}" alt="Logo 2">
                    <span class="logo-text"></span>
                </div>

                <div class="sec-informacns">
                    <h4>INFORMACIONES</h4>
                    <ul>
                        <li><a href="#">Política de devolución y reembolso</a></li>
                        <li><a href="#">Política de privacidad</a></li>
                        <li><a href="#">Términos del Servicio</a></li>
                        <li><a href="#">Política de envío</a></li>
                    </ul>
                </div>
                <div class="sec-rrss">
                    <h4>REDES SOCIALES</h4>
                    <ul>     
                        <li><a href="https://www.facebook.com/?locale=es_LA">Facebook</a></li>
                        <li><a href="https://www.instagram.com/">Instagram</a></li>
                        <li><a href="https://twitter.com/?lang=es">Twitter</a></li>
                    </ul>
                </div>
                <div class="sec-contacto">
                    <h4>CONTÁCTANOS</h4>
                    <p><a href="mailto:contacto@tienda.cl">tiendapatitas@corporacion.cl</a></p>
                    <p>Av. siempreviva 742 - Springfield</p>
                    <p>+56 9 2165 8270</p>
                </div>
            </div>
        </div>
    </footer>
    

    <!--SCRIPT PARA CONTEO-->
    <script>
        let conteo = 0;

        const añadir = () => {
            conteo++;
        }
    
        const actValor = () => {
            document.getElementById('conteo').innerText = conteo;
        };
    
        const añadirBtns = document.getElementsByClassName('añadir-btn');
        Array.from(añadirBtns).forEach(btn => {
            btn.addEventListener('click', (event) =>{
                añadir();
                actValor();
            });
        });
    </script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{% static 'js/script.js' %}"></script>

</body>
</html>